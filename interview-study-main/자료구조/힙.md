# 힙

## 동현

### 힙이란 무엇인가?

힙은 트리 기반의 자료구조입니다. `완전 이진트리` 구조를 가지고 있습니다. 따라서, 각 부모노드는 오로지 두 개의 자식 노드까지만 가질 수 있으며, 한 레벨이 모두 채워져야 다음 레벨로 트리가 늘어날 수 있습니다.

최대 힙과 최소 힙이 존재합니다. 최대 힙은 부모 노드가 항상 자식 노드의 값보다 크거나 같아야 한다는 전제조건이 있으며, 최소 힙은 반대로 부모 노드가 자식 노드의 값보다 작거나 같아야합니다. 이 규칙은 부모-자식 관계에만 적용되며, 멀리 떨어져있는 다른 레벨의 노드끼리는 적용되지 않습니다.

이러한 규칙으로 인해, 힙은 최대값 혹은 최소값이 무조건 최상위 루트 노드에 있게 됩니다. 따라서, 최대 최소값을 1의 시간복잡도로 찾기 위해 사용합니다. 이는, 우선순위 큐를 구현하는데 사용할 수 있습니다. 비슷한 맥락으로, 운영체제에서 우선순위 기반의 일들을 스케줄링 하기 위해 사용할 수도 있습니다.

(참고)
```
peek O(1)
insert O(logN)
remove O(logN)
```

### JS로 힙 구현하기

힙은 완전 이진트리 구조이므로 배열을 이용해서 부모 노드나 자식 노드의 인덱스를 구하기가 매우 간단합니다.

(참고)
```
left child idx = (parent idx * 2) + 1
right child idx = (parent idx * 2) + 2
parent idx = (child idx -1) / 2
```

최소 힙을 구현하는 과정을 설명드리겠습니다.

값을 추가하는 과정은, 트리의 맨 끝에 추가될 데이터를 넣습니다. 부모 노드의 값과 비교하여 만약 자신의 값이 더 작다면 부모 노드와 위치를 바꿉니다. 새로운 위치에서의 부모 노드와 또 값을 비교하여 이를 반복하는데, 이런식으로 루트 노드까지 비교할 수 있습니다. 그렇게 된다면 값을 추가한 후에도 최소 힙의 구조를 만족할 수 있습니다.

최소 힙에서 값을 제거한다는 것은 최소값을 꺼낸다는 의미입니다. 루트 노드가 가장 최소 값이므로 이를 제거해줍니다. 이후, 트리의 맨 마지막 노드를 루트로 옮깁니다. 루트 노드와 자식 노드중 더 작은값과 비교해 만약 루트 노드의 값이 더 크다면 위치를 바꿔줍니다. 이런 식으로 가장 말단의 자식 노드까지 비교를 해서 최소 힙 구조를 잡아주면 됩니다.

### 참고 자료

- [JavaScript로 Heap|Priority Queue 구현하기](https://jun-choi-4928.medium.com/javascript%EB%A1%9C-heap-priority-queue-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-8bc13bf095d9)
# Webpack

## 동현

### Webpack 이란?

최신 FE 프레임워크에서 가장 많이 사용되는 모듈 번들러입니다. 웹 서비스에서 사용되는 모든 정적 파일들을 분석하여 연관 관계를 찾고, 압축 최적화 등을 거쳐 하나의 파일 (혹은 설정에 따라 여러개의 파일)로 만들어줍니다. (현재는 Webpack 5를 사용한다.)

### 왜 사용하는가?

- 빠른 다운로드를 위해 필요합니다. 웹 페이지를 로딩할 때, script, stylesheet, 이미지 파일 등 다양한 파일들이 다운로드 되는 것을 알 수 있습니다. 많은 파일이 다운로드 될 수록, 웹 로딩이 느려질 가능성이 높습니다. 웹팩은 하나의 파일로 이를 합쳐주어 네트워크 접속의 부담을 줄여줍니다.

- 파일의 모듈화를 위해 필요합니다. 자바스크립트 변수의 유효 범위는 전역 범위이기 때문에 모든 파일들이 변수를 공유했습니다. 하지만, 모든 파일들을 모듈화 시킴으로서 파일 스코프 내에서만 변수 유효범위를 가질 수 있도록 했습니다.

- 사용하지 않는 코드도 관리해줍니다.

### Webpack의 주요 속성 4가지

- `entry` : 웹 자원을 변환하기 위해 필요한 최초 진입점입니다.

  - 웹 애플리케이션의 전반적인 구조와 내용을 담아 놓아야 합니다. (해당 정보를 가지고 각 모듈들의 연관 관계를 이해하고 분석하기 때문)
  - 진입점을 시작으로 필요한 모듈들을 알아낼 수 있습니다.

- `output` : 웹팩을 통한 번들링 이후 결과물의 경로와 네이밍에 관한 속성입니다.
- `loader` : js파일이 아닌 파일들을 인식할 수 있도록 만들어줍니다. 오른쪽에서 왼쪽 순서로 인식합니다. 예를 들어, css-loader는 css파일을 인식할 수 있게 해주고 style-loader는 인식한 css파일을 html의 style 태그에 넣어줍니다.
- `plugin` : 빌드 결과에 추가적인 동작을 제공해줍니다. 예를 들어, Webpack의 결과 파일에서 css만 분리해 하나의 파일을 만드는 등의 동작이 가능합니다.

### 번외) 이미지와 css 파일등을 js단에서 import 할 수 있는 이유?

웹팩은 entry로부터 연관된 모든 파일들을 모듈로 인식합니다. 웹팩이 찾은 모듈들은 모두 하나의 코드로 번들링 됩니다. 이것이 가능한 이유는 loader 덕분입니다. 이미지를 data URL 형식의 문자열로 변환하거나 CSS 파일을 js에서 직접 로딩할 수 있도록 해줍니다.

### 참고 자료

- [Webpack은 처음이라 :: 개념부터 활용 예시까지](https://mnxmnz.github.io/webpack/what-is-webpack/)



## 기태

### 웹팩, 번들러
  - 모듈 번들러는 말그대로 여러 모듈을 모아 번들링함으로써 js파일, css파일, 이미지파일 등을 따로따로 네트워크 통신을 통해 가져오는 문제를 해결합니다.
  - 웹팩에서는 모든 파일을 모듈로 봅니다.
  - js뿐만 아니라 css파일, 이미지, 폰트 파일 까지도요.
  - 서로 의존성을 가진 여러 모듈을 돌며 여러개의 js파일을 하나의 js파일로 여러 sass파일을 하나의 css파일로 묶습니다.
  - 웹팩을 사용할 때에는 세가지 필수 설정이 필요합니다.
  - mode는 개발, 프로덕션 같은 모드를 나타내고 entry는 모듈이 시작되는 부분을 나타냅니다.
  - 일반적으로 entry는 index.js가 됩니다.
  - output은 번들링된 파일들을 저장할 위치입니다.
  - 일반적으로 dist나 build라는 이름의 폴더를 사용합니다.

  - loader는 웹팩이 js파일이 아닌 웹 자원(html, css, 이미지, 폰트 등)을 변환할 수 있도록 만들어주는 도구입니다.
  - 자주 사용되는 것은 js에서 css파일을 모듈로서 가져올 수 있게 하는 css-loader, js로 들어간 css를 html에 넣어 브라우저 렌더링 시 적용될 수 있게 해주는 style-loader, 이미지를 모듈로 사용할 수 있게 해주는 file-loader등이 있습니다.
  
  - plugin은 번들된 결과물의 형태를 바꾸는 일을 합니다.
  - 난독화나 특정 문자열 치환 등의 처리를 할 수 있습니다.
  - 예시로는 개발용 api와 배포용 api 주소를 서로 다르게 설정하는 것과 같은 환경 의존적인 정보를 관리하는데 사용하는 DefinePlugin이 있습니다.
  
  - 바벨은 *크로스 브라우징* 문제를 해결합니다.